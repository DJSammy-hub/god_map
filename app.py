import streamlit as st
from datetime import datetime, time
import time as time_module
from lunar_python import Lunar, Solar

# --- 1. 頁面設定 ---
st.set_page_config(
    page_title="找到我的神老闆｜全台廟宇地圖", 
    page_icon="⛩️", 
    layout="centered"
)

# --- 2. 核心資料庫 (神老闆名單) ---
TEMPLE_DB = {
    "武財神 (關聖帝君)": {
        "key": "guan_gong",
        "台北市": "台北行天宮", "新北市": "金瓜石勸濟堂", "基隆市": "基隆聖安宮",
        "桃園市": "大溪普濟堂", "新竹縣": "普元宮", "新竹市": "古奇峰普天宮",
        "苗栗縣": "玉清宮", "台中市": "台中南天宮", "彰化縣": "彰化關帝廟",
        "南投縣": "日月潭文武廟", "雲林縣": "四湖參天宮", "嘉義縣": "嘉義南天門太子行宮",
        "嘉義市": "嘉義文財殿", "台南市": "台灣祀典武廟", "高雄市": "高雄關帝廟 (武廟)",
        "屏東縣": "車城統埔鎮安宮", "宜蘭縣": "礁溪協天廟", "花蓮縣": "花蓮聖天宮",
        "台東縣": "台東關帝廟", "澎湖縣": "澎湖文澳城隍廟", "金門縣": "金門關帝廟",
        "連江縣": "馬祖南竿牛峰境", "default": "雲林北港武德宮 (財神開基祖廟)"
    },
    "天上聖母 (媽祖)": {
        "key": "mazu",
        "台北市": "松山慈祐宮 / 關渡宮", "新北市": "板橋慈惠宮", "基隆市": "慶安宮",
        "桃園市": "中壢仁海宮", "新竹縣": "竹北天后宮", "新竹市": "新竹長和宮",
        "苗栗縣": "白沙屯拱天宮", "台中市": "大甲鎮瀾宮", "彰化縣": "鹿港天后宮",
        "南投縣": "集集廣盛宮", "雲林縣": "北港朝天宮", "嘉義縣": "新港奉天宮",
        "嘉義市": "嘉義朝天宮", "台南市": "大天后宮", "高雄市": "旗津天后宮",
        "屏東縣": "屏東慈鳳宮", "宜蘭縣": "南方澳南天宮", "花蓮縣": "花蓮港天宮",
        "台東縣": "台東天后宮", "澎湖縣": "澎湖天后宮", "金門縣": "金門天后宮",
        "連江縣": "馬祖南竿天后宮", "default": "雲林北港朝天宮"
    },
    "黑虎將軍/武財神": {
        "key": "tiger",
        "台北市": "北投關渡宮 (財神洞)", "新北市": "石碇五路財神廟", "桃園市": "南崁五福宮",
        "台中市": "台中廣天宮", "雲林縣": "北港武德宮 (五路財神祖廟)", "台南市": "南鯤鯓代天府",
        "高雄市": "旗山八路財神廟", "屏東縣": "枋山五路財神廟",
        "default": "北港武德宮 (虎爺大本營)"
    },
    "中壇元帥 (三太子)": {
        "key": "prince",
        "台北市": "社子島坤天亭", "新北市": "新莊保元宮", "桃園市": "桃園護國宮 (太子廟)",
        "新竹市": "指澤宮", "台中市": "三陽玉府